{"ast":null,"code":"// Modified from web3-core-method\n\n/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\n/**\n * @file PromiEvent.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>, Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types */\nimport { EventEmitter } from \"events\";\nexport class InternalPromiEvent {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n    this._cancelled = false;\n    this.eventEmitter = new EventEmitter();\n    return new Proxy(this, {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      get: this.proxyHandler\n    });\n  }\n  /**\n   * Proxy handler to call the promise or eventEmitter methods\n   */\n\n\n  proxyHandler(target, name) {\n    if (name === \"resolve\" || name === \"reject\") {\n      // eslint-disable-next-line security/detect-object-injection\n      return target[name];\n    }\n\n    if (name === \"then\") {\n      return target.promise.then.bind(target.promise);\n    }\n\n    if (name === \"catch\") {\n      return target.promise.catch.bind(target.promise);\n    }\n\n    if (name === \"_cancel\") {\n      return () => {\n        this._cancelled = true;\n      };\n    }\n\n    if (name === \"_isCancelled\") {\n      return () => this._cancelled === true;\n    }\n\n    if (name === \"_resume\") {\n      return () => {\n        this._cancelled = false;\n      };\n    } // eslint-disable-next-line security/detect-object-injection, @typescript-eslint/no-unsafe-member-access\n\n\n    if (target.eventEmitter[name]) {\n      // eslint-disable-next-line security/detect-object-injection, @typescript-eslint/no-unsafe-member-access\n      return target.eventEmitter[name];\n    }\n\n    return;\n  }\n\n}\nexport const newPromiEvent = () => new InternalPromiEvent();","map":{"version":3,"sources":["../../src/promiEvent.ts"],"names":[],"mappings":"AAAA;;AAEA;;;;;;;;;;;;;;;AAeE;;AACF;;;;AAIG;;AAEH;;AACA;;AACA;AAEA,SAAS,YAAT,QAA6B,QAA7B;AAEA,OAAM,MAAO,kBAAP,CAAyB;AA8C3B;;AAEG;AACH,EAAA,WAAA,GAAA;AACI,SAAK,OAAL,GAAe,IAAI,OAAJ,CAAe,CAAC,OAAD,EAAU,MAAV,KAAoB;AAC9C,WAAK,OAAL,GAAe,OAAf;AACA,WAAK,MAAL,GAAc,MAAd;AACH,KAHc,CAAf;AAKA,SAAK,UAAL,GAAkB,KAAlB;AAEA,SAAK,YAAL,GAAoB,IAAI,YAAJ,EAApB;AAEA,WAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB;AACnB;AACA,MAAA,GAAG,EAAE,KAAK;AAFS,KAAhB,CAAP;AAIH;AAED;;AAEG;;;AACI,EAAA,YAAY,CACf,MADe,EAEf,IAFe,EAEH;AAEZ,QAAI,IAAI,KAAK,SAAT,IAAsB,IAAI,KAAK,QAAnC,EAA6C;AACzC;AACA,aAAO,MAAM,CAAC,IAAD,CAAb;AACH;;AAED,QAAI,IAAI,KAAK,MAAb,EAAqB;AACjB,aAAO,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,IAApB,CAAyB,MAAM,CAAC,OAAhC,CAAP;AACH;;AAED,QAAI,IAAI,KAAK,OAAb,EAAsB;AAClB,aAAO,MAAM,CAAC,OAAP,CAAe,KAAf,CAAqB,IAArB,CAA0B,MAAM,CAAC,OAAjC,CAAP;AACH;;AAED,QAAI,IAAI,KAAK,SAAb,EAAwB;AACpB,aAAO,MAAK;AACR,aAAK,UAAL,GAAkB,IAAlB;AACH,OAFD;AAGH;;AAED,QAAI,IAAI,KAAK,cAAb,EAA6B;AACzB,aAAO,MAAM,KAAK,UAAL,KAAoB,IAAjC;AACH;;AAED,QAAI,IAAI,KAAK,SAAb,EAAwB;AACpB,aAAO,MAAK;AACR,aAAK,UAAL,GAAkB,KAAlB;AACH,OAFD;AAGH,KA7BW,CA+BZ;;;AACA,QAAK,MAAM,CAAC,YAAP,CAA4B,IAA5B,CAAL,EAAwC;AACpC;AACA,aAAQ,MAAM,CAAC,YAAP,CAA4B,IAA5B,CAAR;AACH;;AAED;AACH;;AA5G0B;AAqH/B,OAAO,MAAM,aAAa,GAAG,MAItB,IAAI,kBAAJ,EAJA","sourceRoot":"","sourcesContent":["// Modified from web3-core-method\n/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file PromiEvent.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>, Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types */\nimport { EventEmitter } from \"events\";\nexport class InternalPromiEvent {\n    /**\n     * @constructor\n     */\n    constructor() {\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n        this._cancelled = false;\n        this.eventEmitter = new EventEmitter();\n        return new Proxy(this, {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            get: this.proxyHandler,\n        });\n    }\n    /**\n     * Proxy handler to call the promise or eventEmitter methods\n     */\n    proxyHandler(target, name) {\n        if (name === \"resolve\" || name === \"reject\") {\n            // eslint-disable-next-line security/detect-object-injection\n            return target[name];\n        }\n        if (name === \"then\") {\n            return target.promise.then.bind(target.promise);\n        }\n        if (name === \"catch\") {\n            return target.promise.catch.bind(target.promise);\n        }\n        if (name === \"_cancel\") {\n            return () => {\n                this._cancelled = true;\n            };\n        }\n        if (name === \"_isCancelled\") {\n            return () => this._cancelled === true;\n        }\n        if (name === \"_resume\") {\n            return () => {\n                this._cancelled = false;\n            };\n        }\n        // eslint-disable-next-line security/detect-object-injection, @typescript-eslint/no-unsafe-member-access\n        if (target.eventEmitter[name]) {\n            // eslint-disable-next-line security/detect-object-injection, @typescript-eslint/no-unsafe-member-access\n            return target.eventEmitter[name];\n        }\n        return;\n    }\n}\nexport const newPromiEvent = () => new InternalPromiEvent();\n//# sourceMappingURL=promiEvent.js.map"]},"metadata":{},"sourceType":"module"}